var self=this,internals={};internals.LRUCache={},internals.STATIC_CACHE_NAME="static-v1-y0m0gk1",internals.API_CACHE_NAME="api-v1-y0m0gk1",internals.SUGGEST_CACHE_NAME="suggest-v1-y0m0gk1",internals.SUGGEST_CACHE_TIME=3e5,internals.API_CACHE_TIME=3e5,internals.CACHE_FILE_LIST=["fonts/proximanova-regular-webfont.woff2","styles/site.css","images/iron_man.jpg"],internals.CACHE_API_LIST=["/"],internals.SUGGEST_API_LIST=["/api/suggest"],internals.cacheAPIResponse=function(e){var n=(new Date).getTime(),t=new URL(e.url);return caches.match(e).then(function(a){return a&&n-internals.LRUCache[t.pathname+t.search]<internals.API_CACHE_TIME?a:fetch(e).then(function(a){return internals.LRUCache[t.pathname+t.search]=n,caches.open(internals.API_CACHE_NAME).then(function(n){n.put(e,a)}),a.clone()})})},internals.cacheSuggestResponse=function(e){var n=(new Date).getTime(),t=new URL(e.url);return caches.match(e).then(function(a){return a&&n-internals.LRUCache[t.pathname+t.search]<internals.SUGGEST_CACHE_TIME?a:fetch(e).then(function(a){return internals.LRUCache[t.pathname+t.search]=n,caches.open(internals.SUGGEST_CACHE_NAME).then(function(n){n.put(e,a)}),a.clone()})})},internals.cacheStaticAssets=function(e){return caches.match(e).then(function(n){return n&&"opaque"!==n.type?n:fetch(e).then(function(n){return caches.open(internals.STATIC_CACHE_NAME).then(function(t){t.put(e,n)}),n.clone()})})},self.addEventListener("fetch",function(e){var n=new URL(e.request.url);internals.CACHE_API_LIST.indexOf(n.pathname)>=0?e.respondWith(internals.cacheAPIResponse(e.request)):internals.SUGGEST_API_LIST.indexOf(n.pathname.split("?")[0])>=0?e.respondWith(internals.cacheSuggestResponse(e.request)):internals.CACHE_FILE_LIST.indexOf(n.href)>=0?e.respondWith(internals.cacheStaticAssets(e.request)):e.respondWith(fetch(e.request))}),self.addEventListener("install",function(e){e.waitUntil(Promise.all([caches.open(internals.STATIC_CACHE_NAME).then(function(e){return e.addAll(internals.CACHE_FILE_LIST)})]).then(function(){return self.skipWaiting()}))}),self.addEventListener("activate",function(e){self.clients&&clients.claim&&clients.claim(),e.waitUntil(caches.keys().then(function(e){Promise.all([e.map(function(e){if(internals.STATIC_CACHE_NAME!==e&&internals.API_CACHE_NAME!==e)return caches.delete(e)})])}))});